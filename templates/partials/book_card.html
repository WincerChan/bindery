{% set rating = book.rating or 0 %}
<article class="book-card" id="book-{{ book.book_id }}">
  <div class="card-header">
    <h3>{{ book.title }}</h3>
    <div class="rating">
      {% for _ in range(rating) %}★{% endfor %}
      {% for _ in range(5 - rating) %}☆{% endfor %}
    </div>
  </div>
  <div class="meta">
    <div><span>作者</span>{{ book.author or "未知" }}</div>
    <div><span>语言</span>{{ book.language }}</div>
    {% if book.publisher %}<div><span>出版社</span>{{ book.publisher }}</div>{% endif %}
    {% if book.tags %}<div><span>标签</span>{{ book.tags | join(", ") }}</div>{% endif %}
  </div>
  <div class="card-actions">
    <a class="btn ghost" href="/book/{{ book.book_id }}">详情</a>
    <a class="btn ghost" href="/book/{{ book.book_id }}/preview">预览</a>
    <a class="btn" href="/book/{{ book.book_id }}/download">下载</a>
  </div>
</article>
